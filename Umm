from pypdf import PdfReader
from openai import OpenAI

# âœ… Replace with your OpenAI API key
client = OpenAI(api_key="YOUR_OPENAI_API_KEY")

def extract_text_from_pdf(pdf_path):
    """Extract all text from a PDF file."""
    reader = PdfReader(pdf_path)
    full_text = ""
    for page in reader.pages:
        text = page.extract_text()
        if text:
            full_text += text + "\n"
    return full_text.strip()

def ask_question_about_pdf(pdf_text, question):
    """Ask GPT about the PDF content."""
    prompt = f"""
    You are an AI that answers questions based only on the PDF content.
    PDF Content:
    {pdf_text}

    Question: {question}
    Answer:
    """

    response = client.chat.completions.create(
        model="gpt-4o-mini",
        messages=[{"role": "user", "content": prompt}],
        temperature=0
    )
    return response.choices[0].message.content

if __name__ == "__main__":
    # âœ… Change these
    pdf_path = "sample.pdf"  # Path to your PDF file
    question = "Summarize this PDF in 5 bullet points."

    # Extract PDF text
    pdf_text = extract_text_from_pdf(pdf_path)

    # Ask the question
    answer = ask_question_about_pdf(pdf_text, question)

    # Print the answer
    print("\nðŸ’¡ Answer:")
    print(answer)
